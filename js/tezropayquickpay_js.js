var orderArray=[],instantPay=async function(e){var t=JSON.parse(e.getAttribute("data-json"));orderArray.includes(t.orderId)||(currentProductId=t.orderId,orderArray.push(t.orderId),tezroApiInstantPay.runExtButtonSpinner(e,t.orderId),tezroApiInstantPay.payInit(e,t))},buyNow=async function(e){var t=JSON.parse(e.getAttribute("data-json"));orderArray.includes(t.orderId)||(currentProductId=t.orderId,orderArray.push(t.orderId),tezroApiInstantPay.payBuyNow(e,t))},isOpen=!1;let currentEvent,reqTimeout,reqInterval,clearIntervalTimeout,initTimeout,tezroPayQRContainer,qr,currentLink,currentOrderId,confirmStatusUrl,currentProductId;const tezroApiInstantPay={runExtButtonSpinner:async function(e,t){var n;isOpen=!0,currentEvent=e;var o="";document.getElementById("tezroInstantPay"+t)?n=document.getElementById("tezroInstantPay"+t):(n=document.getElementById(e.target.id),o="display:none;");const r=n.getBoundingClientRect().height,i=document.body.clientWidth,a=n.getBoundingClientRect().width,d=n.getBoundingClientRect().x,s=n.getBoundingClientRect().x<i/2?"left":"right",l=document.createElement("div");l.setAttribute("id","tezroPayBtnWrapper"+t),l.setAttribute("class","tezroPayBtnWrapperClass"),l.style.position="relative",l.style.width=a,l.style.marginTop="-190px",l.style.height="100%",createSpinnerAnimationStyles(),n.insertAdjacentHTML("beforeend",externalSpinner(r)),tezroApiInstantPay.isMobile()?l.insertAdjacentHTML("beforeend",'<div id="tezroPayQRContainer'+t+'" class="tezroPayQRContainerFrame" style="word-break: break-word; cursor: auto; display: flex; flex-direction: column; justify-content: center; align-items: center; border-radius: 10px; padding: 5px 5px 20px 5px; z-index: 1; margin-bottom: 10px; bottom: 100%; min-height: 150px; background-color: #fff;">\n          <button class="tezroPayQRContainerButton" onclick=\'tezroApiInstantPay.close('+t+");' style='"+o+"pointer-events: auto; width: 30px; height: 30px; border-radius: 20px; box-shadow: 0px 0px 8px rgba(0,0,0,0.2); position: absolute; z-index: 2; top: -15px; right: -15px; border: none; background-color: #fff; font-size: 14px; font-weight: 700; color: #2C3036'>X</button>\n          <div id=\"tezroPayQRBox"+t+"\" style=\"display: inline-block;\">\n            <button style='background: transparent; border: none;' onclick='openLink("+t+");' id='tezroPayQRMobileButton"+t+"'></button>\n          </div>\n        </div>"):l.insertAdjacentHTML("beforeend",'<div id="tezroPayQRContainer'+t+'" class="tezroPayQRContainerFrame" style="word-break: break-word; cursor: auto; display: flex; flex-direction: column; justify-content: center; align-items: center; border-radius: 10px; padding: 5px 5px 20px 5px; z-index: 1; margin-bottom: 10px; bottom: 100%; min-height: 150px; background-color: #fff;">\n          <button class="tezroPayQRContainerButton" onclick=\'tezroApiInstantPay.close('+t+");' style='"+o+"pointer-events: auto; width: 30px; height: 50px; border-radius: 20px; box-shadow: 0px 0px 8px rgba(0,0,0,0.2); position: absolute; z-index: 2; top: -15px; right: -15px; border: none; background-color: #fff; font-size: 14px; font-weight: 700; color: #2C3036'>X</button>\n          <div id=\"tezroPayQRBox"+t+'" style="display: inline-block;"></div>\n        </div>'),wrap(n,l),(tezroPayQRContainer=document.getElementById("tezroPayQRContainer"+t)).style.margin="auto",tezroPayQRContainer.style.display="none",document.getElementById("tezroInstantPay"+t),tezroPayQRContainer.style.width="100%",tezroPayQRContainer.style.animationName="slider",tezroPayQRContainer.style.animationDuration="500ms",tezroPayQRContainer.style.animationFillMode="forwards",tezroPayQRContainer.style.boxShadow="rgba(0, 0, 0, 0.2) 0px 0px 13px","left"===s&&d<150?d<Math.abs(d-a)?tezroPayQRContainer.style.left=a<150?"0":"9px":tezroPayQRContainer.style.left=Math.abs(d-a):tezroPayQRContainer.style.right=d+a>=i?"0":500},stopExtButtonSpinner:function(e){const t=document.getElementById("tezroPayExternalButtonSpinner"+e);t&&t.parentNode.removeChild(t)},payInit:async function(e,t){try{await initWidget(t,e)}catch(e){console.log(e)}},payBuyNow:async function(e,t,n){try{await initBuyNow(t,n,e)}catch(e){console.log(e)}},checkoutInit:async function(e,t,n){try{await checkoutWidget(t,n,e)}catch(e){console.log(e)}},isMobile:function(){return navigator.appVersion.indexOf("Mobile")>-1},isIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},isAndroid:function(){return navigator.appVersion.indexOf("Android")>-1},close:function(e){var t=orderArray.indexOf(e);t>-1&&orderArray.splice(t,1),currentLink=null,qr&&qr.clear(),isOpen=!1,currentEvent=null;const n=document.getElementById("tezroPayBtnWrapper"+e);n&&n.parentNode.removeChild(n);const o=document.getElementById("tezroPayQRContainer"+e);o&&o.parentNode.removeChild(o),tezroApiInstantPay.stopExtButtonSpinner(e),clearTimeout(reqTimeout),clearInterval(reqInterval),clearTimeout(clearIntervalTimeout)}};let initWidget=async function(e,t){currentOrderId=e.orderId,currentEvent=t;let n=document.createElement("style");n.type="text/css";let o=document.createTextNode("@-webkit-keyframes slider {from { opacity: 0 }to { opacity: 1 }}"),r=document.createTextNode("@-webkit-keyframes lds-ring {from { transform: rotate(0deg) }to { transform: rotate(360deg) }}");n.appendChild(o),n.appendChild(r),document.getElementsByTagName("head")[0].appendChild(n);try{const n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)},o=await fetch(e.initTezro,n),r=await o.json();currentLink=r.link;let i=document.getElementById("tezroPayQRContainer"+e.orderId);i.insertAdjacentHTML("afterbegin",titleContent(t.pointerId,r.link,e.orderId)),i||(i=i.insertAdjacentHTML("afterbegin",titleContent(t.pointerId,r.link,e.orderId))),tezroPayQRContainer.style.display="flex",confirmStatusUrl=e.confirmStatusUrl,await checkPaymentStatus(r.id,e.keyId,e.orderId,t),await generateQRCode(QRCode,r.link,e.orderId,t,r.eosName,r.totalAmount,r.currency,r.photos,r.name,r.id)}catch(t){console.log(t),tezroApiInstantPay.close(e.orderId)}tezroApiInstantPay.stopExtButtonSpinner()},initBuyNow=async function(e,t){currentOrderId=e.orderId,currentEvent=t;try{const t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)},n=await fetch(e.initTezro,t),o=await n.json();currentLink=o.link,confirmStatusUrl=e.confirmStatusUrl,tezroApiInstantPay.isMobile()?location.href=o.link:window.open(o.link,"_blank")}catch(t){console.log(t),tezroApiInstantPay.close(e.orderId)}tezroApiInstantPay.stopExtButtonSpinner()},checkoutWidget=async function(e,t,n){currentOrderId=e.orderId,currentEvent=n;let o=document.createElement("style");o.type="text/css";let r=document.createTextNode("@-webkit-keyframes slider {from { opacity: 0 }to { opacity: 1 }}"),i=document.createTextNode("@-webkit-keyframes lds-ring {from { transform: rotate(0deg) }to { transform: rotate(360deg) }}");o.appendChild(r),o.appendChild(i),document.getElementsByTagName("head")[0].appendChild(o);try{currentLink=t.link;let o=document.getElementById("tezroPayQRContainer"+e.orderId);o.insertAdjacentHTML("afterbegin",titleContent(n.pointerId,t.link,e.orderId)),o||(o=o.insertAdjacentHTML("afterbegin",titleContent(n.pointerId,t.link,e.orderId))),tezroPayQRContainer.style.display="flex",confirmStatusUrl=e.confirmStatusUrl,await checkPaymentStatus(t.id,e.keyId,e.orderId,n),await generateQRCode(QRCode,t.link,e.orderId,n,t.eosName,t.totalAmount,t.currency,t.photos,t.name,t.id)}catch(t){console.log(t),tezroApiInstantPay.close(e.orderId)}tezroApiInstantPay.stopExtButtonSpinner()};async function generateQRCode(e,t,n,o,r,i,a,d,s,l){currentEvent=o;let c=tezroApiInstantPay.isMobile()?document.getElementById("tezroPayQRMobileButton"+n):document.getElementById("tezroPayQRBox"+n);c?qr=new e(c,{text:t,width:150,height:150}):(console.log("QR Code problem"),openLink(n))}function openLink(e){const t=document.getElementById("tezropaylink"+e).value;window.open(t,"_blank")}function wrap(e,t){e.insertAdjacentHTML("afterEnd",t.outerHTML)}async function checkPaymentStatus(e,t,n,o){document.getElementById("tezroPayQRBox"+n),document.getElementById("tezroPayTitleBox"+n);currentEvent=o,reqInterval=setInterval(async()=>{const r=new Date,i=await fetch(`https://openapi.tezro.com/api/v1/orders/${e}`,{method:"GET",headers:{KeyID:t,Timestamp:Date.now()}}).then(e=>e.json());let a=async function(e,t){try{const t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)},n=await fetch(confirmStatusUrl,t),r=await n.json();console.log(r),await generateQRCode(QRCode,r.link,params.orderId,o)}catch(e){}};switch(i.status){case"order_created":currentLink=i.link;break;case"address_confirmed":tezroPayQRContainer.style.display="flex";new Date(i.expiresAt).toISOString(),new Date(i.expiresAt).toLocaleDateString(),new Date(i.expiresAt).toLocaleTimeString();if((l=document.getElementById("addressConfirmedContent"+n))||tezroPayQRContainer&&tezroPayQRContainer.insertAdjacentHTML("beforeend",addressConfirmedContent(o.pointerId,i.expiresAt,n)),i.expiresAt){initializeClock("timerCountdown",new Date(i.expiresAt).toISOString())}a(i);break;case"order_payed":case"order_confirmed":var d,s,l;tezroPayQRContainer.style.display="flex",clearInterval(reqInterval),clearTimeout(clearIntervalTimeout),(d=document.getElementById("tezroPayTitleBox"+n))&&d.parentNode.removeChild(d),(s=document.getElementById("tezroPayQRBox"+n))&&s.parentNode.removeChild(s),(l=document.getElementById("addressConfirmedContent"+n))&&l.parentNode.removeChild(l),document.getElementById("tezroPayPaidContent"+n)||tezroPayQRContainer&&tezroPayQRContainer.insertAdjacentHTML("beforeend",paidContent(o.pointerId,n)),a(i);break;case"order_expired":{const e=r.toLocaleDateString(),t=r.toLocaleTimeString();new Date(expiresAtDate+" "+expiresAtTime)<new Date(e+" "+t)&&tezroApiInstantPay.close(currentProductId);break}default:return void tezroApiInstantPay.close(n)}},2e3),clearIntervalTimeout=setTimeout(()=>{clearInterval(reqInterval)},9e5)}function createSpinnerAnimationStyles(){let e=document.createElement("style");e.type="text/css";let t=document.createTextNode("@-webkit-keyframes lds-ring {from { transform: rotate(0deg) }to { transform: rotate(360deg) }}");e.appendChild(t),document.getElementsByTagName("head")[0].appendChild(e)}function getTimeRemaining(e){const t=Date.parse(e)-Date.parse(new Date),n=Math.floor(t/1e3%60),o=Math.floor(t/1e3/60%60),r=Math.floor(t/36e5%24);return{total:t,days:Math.floor(t/864e5),hours:r,minutes:o<10?"0"+o:o,seconds:n<10?"0"+n:n}}function initializeClock(e,t){const n=document.getElementById(e),o=setInterval(()=>{const e=getTimeRemaining(t);n.innerText=`${e.minutes} : ${e.seconds}`,e.total<=0&&clearInterval(o)},1e3)}let externalSpinner=function(e){const t=e>30?e-15:e-5;return"<div id='tezroPayExternalButtonSpinner"+currentProductId+`' style='position: absolute; \n    top: 0; \n    left: 0; \n    right: 0; \n    bottom: 0; \n    z-index: 0; \n    background: linear-gradient(45deg, #2C3036, #575F6B);\n    display: flex;\n    justify-content: center;\n    align-items: center;'\n  >\n      <div class='lds-ring' style="display: inline-block;\n        position: relative;\n        width: ${t}px;\n        height: ${t}px;"\n        display: flex;\n        justify-content: center;\n        align-items: center;"\n      >\n        <div style='box-sizing: border-box;\n          display: block;\n          position: absolute;\n          width: ${t-2}px;\n          height: ${t-2}px;\n          border: 2px solid #fff;\n          border-radius: 50%;\n          animation: lds-ring 1.2s linear infinite;\n          border-color: #fff #fff transparent transparent;'>\n        </div>\n      </div>\n  </div>`},titleContent=(e,t,n)=>e===currentEvent.pointerId&&'<div class="tezroPayTitleBoxClass" id="tezroPayTitleBox'+n+"\" style='width: 100%; display: flex; justify-content: center;'>\n            <input id='tezropaylink"+n+`' hidden value='${t}'>\n            <a href="`+t+`" target="_blank"><p style='font-size: 16px; font-weight: 700; color: #2C3036; margin-bottom: 10px;line-height: normal;'>${tezroApiInstantPay.isMobile()?"Click and Pay":"Scan QR and Pay without sign up"}</p></a>\n          </div>`,addressConfirmedContent=(e,t,n)=>e===currentEvent.pointerId&&"<div id='addressConfirmedContent"+n+"' style='display: flex; flex-direction: column; align-items: center;'>\n  <h3 style='color: #2c3036; font-size: 16px; text-align: center;'>Awaiting your payment</h3>\n  <p style='margin-top: 7px; text-align: center; color: #828282; font-size: 12px; font-weight: 700;'>Without payment, your order will be cancelled after</p>\n  <div style='align-self: stretch; min-height: 40px; display: flex; justify-content: center; align-items: center; background: #2c3036; border-radius: 50px; padding: 5px; margin-top: 1px;'>\n    <p id='timerCountdown' style='margin-bottom: 0; font-size: 16px; color: #ffffff; font-weight: 700; text-align: center;'></p>\n  </div>\n</div>",paidContent=(e,t)=>e===currentEvent.pointerId&&"<div id='tezroPayPaidContent"+t+'\' style=\'display: flex; flex-direction: column; justify-content: center; align-items: center;\'>\n  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 64.341 64.341">\n    <defs>\n      <linearGradient id="linear-gradient" x1="0.5" y1="0.5" x2="0.145" gradientUnits="objectBoundingBox">\n        <stop offset="0" stop-color="#575f6b"/>\n        <stop offset="1" stop-color="#2c3036"/>\n      </linearGradient>\n    </defs>\n    <g id="Group_12256" data-name="Group 12256" transform="translate(-703.5 -283.5)">\n      <path id="Path_21429" data-name="Path 21429" d="M749.671,305.621a2.474,2.474,0,0,1,0,3.5l-16.6,16.6a2.475,2.475,0,0,1-3.5,0l-7.9-7.9a2.474,2.474,0,0,1,3.5-3.5l6.152,6.152,14.849-14.85a2.475,2.475,0,0,1,3.5,0Zm17.671,10.049A31.671,31.671,0,1,1,735.671,284a31.653,31.653,0,0,1,31.671,31.671Zm-4.948,0a26.722,26.722,0,1,0-26.722,26.722,26.707,26.707,0,0,0,26.722-26.722Zm0,0" stroke="rgba(0,0,0,0)" stroke-width="1" fill="url(#linear-gradient)"/>\n    </g>\n  </svg>\n\n  <p style=\'color: #2c3036; font-size: 16px; font-weight: 700; margin-top: 0px;\'>Paid</p>\n  <p style=\'color: #2c3036; font-size: 8px; font-weight: 700; margin-top: 0px;\'>Please, unlock payment in Tezro App after you received your order.</p>\n  <button onclick=\'event.stopPropagation(); tezroApiInstantPay.close('+currentProductId+");' style='pointer-events: auto; background: linear-gradient(45deg, #2C3036, #575F6B); width: 80px; padding: 5px; font-weight: 700; border-radius: 20px; height: 30px; font-size: 12px; margin-top: 1px; border: none; color: #fff;'>OK</button>\n</div>";